<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secret√°ria Virtual Botox</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* Estilos do body e do cont√™iner principal */
        :root {
            /* Nova paleta de cores azuis */
            --primary-color: #0a2a5e;
            --secondary-color: #007bff;
            --tertiary-color: #00b4d8;
            
            --background-color: #f0f2f5;
            --chat-bg-color: #ffffff;
            --user-msg-bg: #e1ffc7;
            --bot-msg-bg: #f1f0f0;
            --border-radius: 20px;
            --box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: var(--background-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        .chat-container {
            width: 100%;
            max-width: 600px;
            background-color: var(--chat-bg-color);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            display: flex;
            flex-direction: column;
            height: 90vh;
            overflow: hidden;
        }

        .chat-header {
            /* Degrad√™ de azuis */
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color), var(--tertiary-color));
            color: white;
            padding: 20px;
            text-align: center;
            font-size: 1.5rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .instagram-icon {
            width: 24px;
            height: 24px;
            fill: white;
        }

        /* Estilos para a √°rea de mensagens */
        .chat-box {
            flex-grow: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* Estilos das mensagens */
        .message {
            max-width: 80%;
            padding: 15px;
            border-radius: var(--border-radius);
            word-wrap: break-word;
        }

        .message.bot {
            background-color: var(--bot-msg-bg);
            align-self: flex-start;
            border-bottom-left-radius: 4px;
        }

        .message.user {
            background-color: var(--user-msg-bg);
            align-self: flex-end;
            border-bottom-right-radius: 4px;
        }

        /* Estilos dos bot√µes do menu */
        .menu-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
            padding: 20px;
            background-color: #fff;
            border-top: 1px solid #e0e0e0;
        }

        .menu-button, .time-button {
            padding: 15px;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color), var(--tertiary-color));
            color: white;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: transform 0.2s, box-shadow 0.2s, background 0.3s;
            text-align: center;
        }

        .menu-button:hover, .time-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            background: linear-gradient(45deg, var(--tertiary-color), var(--secondary-color), var(--primary-color));
        }

        /* Estilos para o input de agendamento */
        .scheduling-input {
            padding: 20px;
            border-top: 1px solid #e0e0e0;
            display: flex;
            gap: 10px;
            background-color: #fff;
        }

        .scheduling-input input {
            flex-grow: 1;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 25px;
            font-size: 1rem;
            outline: none;
            transition: border-color 0.3s;
        }

        .scheduling-input input:focus {
            border-color: var(--primary-color);
        }

        .scheduling-input button {
            padding: 12px 20px;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color), var(--tertiary-color));
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .scheduling-input button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        /* Estilos do calend√°rio */
        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-top: 10px;
            text-align: center;
        }

        .calendar-header {
            grid-column: 1 / -1;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 700;
            margin-bottom: 10px;
            padding: 0 5px;
        }

        .calendar-header button {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--primary-color);
        }
        
        .calendar-header button:hover {
            opacity: 0.8;
        }

        .day-name {
            font-size: 0.8rem;
            font-weight: 700;
            color: #777;
        }

        .day-cell {
            padding: 10px;
            cursor: pointer;
            border-radius: 50%;
            transition: background-color 0.2s, color 0.2s;
        }
        
        .day-cell.available:hover {
            background-color: var(--primary-color);
            color: white;
        }

        .day-cell.available.selected {
            background-color: var(--secondary-color);
            color: white;
            font-weight: 700;
        }

        .day-cell.unavailable {
            color: #ccc;
            cursor: not-allowed;
        }

        /* Estilos dos hor√°rios */
        .time-slots {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
    </style>
</head>
<body>

<div class="chat-container">
    <div class="chat-header">
        <svg class="instagram-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm-90.9 44.6c-19.6 0-35.6 16-35.6 35.6s16 35.6 35.6 35.6 35.6-16 35.6-35.6-16-35.6-35.6-35.6zm131.6-41.6c-17.6 0-31.9 14.3-31.9 31.9s14.3 31.9 31.9 31.9 31.9-14.3 31.9-31.9-14.3-31.9-31.9-31.9zm81 29.8c-29.6-1.5-56.1-9.9-80.1-26.6-1.1-.9-2.7-2.7-3.6-3.8l-1.9-2.2c-5.7-6.2-12.8-11.7-21.5-16.1-5.6-2.9-11.7-5.2-17.9-6.9-2.3-.6-4.5-1.2-6.8-1.5l-2.4-.4c-12.3-2.1-25.1-3.2-38.3-3.2-3.1 0-6.1 .1-9.1 .2-15.1 .5-29.7 1.8-43.8 3.9l-2.7 .4c-2.3 .4-4.6 1-6.8 1.5-6.2 1.7-12.3 4-17.9 6.9-8.7 4.4-15.8 9.9-21.5 16.1l-1.9 2.2c-.9 1.1-2.5 2.9-3.6 3.8-24 16.7-50.5 25.1-80.1 26.6-17.1 .9-32.9 2.1-47.5 3.5l-3.3 .3c-7 .7-13.8 1.4-20.7 2.1l-1.4 .1c-13.7 1.4-27.1 2.8-40.1 4.3l-2.6 .3c-5.4 .6-10.7 1.2-16 1.8-1.3 .2-2.5 .4-3.8 .6-12.2 1.8-23.7 3.5-34.5 5.5l-1.9 .4c-4.6 1-8.7 2.1-12.3 3.3-6.5 2.1-12.2 4.4-17.5 7.1-5.1 2.6-9.6 5.5-13.9 8.6-4.2 3.1-8 6.5-11.3 10.1-3 3.3-5.7 6.9-8.1 10.7-5.3 8.5-9.4 17.5-12 26.9-2.5 9.4-4 19-4.8 28.5-1.5 18.7-2.3 37.9-2.3 57.9 0 20.3 .8 39.8 2.5 58.7 .8 9.6 2.3 19.3 4.8 29.1 2.6 9.8 6.7 19.1 12 27.5 2.4 3.8 5.1 7.4 8.1 10.7 3.3 3.6 7.1 7 11.3 10.1 4.3 3.1 8.8 6 13.9 8.6 5.3 2.7 11 5 17.5 7.1 3.6 1.2 7.8 2.3 12.3 3.3l1.9 .4c10.8 2 22.3 3.7 34.5 5.5 1.3 .2 2.5 .4 3.8 .6 5.3 .6 10.6 1.2 16 1.8l2.6 .3c13 .8 26.4 2.2 40.1 4.3l1.4 .1c6.9 .7 13.7 1.4 20.7 2.1l3.3 .3c14.6 1.4 30.4 2.6 47.5 3.5 29.6 1.5 56.1 9.9 80.1 26.6 1.1 .9 2.7 2.7 3.6 3.8l1.9 2.2c5.7 6.2 12.8 11.7 21.5 16.1 5.6 2.9 11.7 5.2 17.9 6.9 2.3 .6 4.5 1.2 6.8 1.5l2.4 .4c12.3 2.1 25.1 3.2 38.3 3.2 3.1 0 6.1-.1 9.1-.2 15.1-.5 29.7-1.8 43.8-3.9l2.7-.4c2.3-.4 4.6-1 6.8-1.5 6.2-1.7 12.3-4 17.9-6.9 8.7-4.4 15.8-9.9 21.5-16.1l1.9-2.2c.9-1.1 2.5-2.9 3.6-3.8 24-16.7 50.5-25.1 80.1-26.6 17.1-.9 32.9-2.1 47.5-3.5l3.3-.3c7-.7 13.8-1.4 20.7-2.1l1.4-.1c13.7-1.4 27.1-2.8 40.1-4.3l2.6-.3c5.4-.6 10.7-1.2 16-1.8 1.3-.2 2.5-.4 3.8-.6 12.2-1.8 23.7-3.5 34.5-5.5l1.9-.4c4.6-1 8.7-2.1 12.3-3.3 6.5-2.1 12.2-4.4 17.5-7.1 5.1-2.6 9.6-5.5 13.9-8.6 4.2-3.1 8-6.5 11.3-10.1 3-3.3 5.7-6.9 8.1-10.7 5.3-8.5 9.4-17.5 12-26.9 2.5-9.4 4-19 4.8-28.5 1.5-18.7 2.3-37.9 2.3-57.9 0-20.3-.8-39.8-2.5-58.7-.8-9.6-2.3-19.3-4.8-29.1-2.6-9.8-6.7-19.1-12-27.5-2.4-3.8-5.1-7.4-8.1-10.7-3.3-3.6-7.1-7-11.3-10.1-4.3-3.1-8.8-6-13.9-8.6-5.3-2.7-11-5-17.5-7.1zM224.1 292.5c-20.3 0-36.6-16.3-36.6-36.6s16.3-36.6 36.6-36.6 36.6 16.3 36.6 36.6-16.3 36.6-36.6 36.6zM321.1 161c-11.8 0-21.5-9.7-21.5-21.5s9.7-21.5 21.5-21.5 21.5 9.7 21.5 21.5-9.7 21.5-21.5 21.5z"/></svg>
        Secret√°ria Virtual Botox
    </div>

    <!-- Cont√™iner da conversa -->
    <div class="chat-box" id="chatBox">
        <div class="message bot">
            Ol√°! Sou sua assistente virtual na BS Est√©tica. Escolha uma op√ß√£o para come√ßar. üòä
        </div>
    </div>

    <!-- Cont√™iner dos bot√µes do menu, que ser√° manipulado via JS -->
    <div class="menu-container" id="menuContainer">
        <!-- Bot√µes ser√£o inseridos aqui pelo JavaScript -->
    </div>
</div>

<script>
    // Seleciona os elementos do DOM
    const chatBox = document.getElementById('chatBox');
    const menuContainer = document.getElementById('menuContainer');

    // Estado do assistente para controlar o fluxo de agendamento
    let estadoAgendamento = 0; // 0: inativo, 1: selecionar data, 2: selecionar hora, 3: pedir nome, 4: pedir telefone
    let nomeCliente = '';
    let telefoneCliente = '';
    let dataSelecionada = null;
    let horarioSelecionado = null;
    let dataAtual = new Date();

    // Estrutura de dados para o menu e respostas
    const botData = {
        mainMenu: [
            { id: 'sobreBotox', text: 'Sobre o Botox' },
            { id: 'precoEAgendamento', text: 'Pre√ßo e Agendamento' },
            { id: 'aplicacaoEfeitos', text: 'Aplica√ß√£o e Efeitos' },
            { id: 'cuidadosSeguranca', text: 'Cuidados e Seguran√ßa' },
            { id: 'agendarDireto', text: 'Quero Agendar' }
        ],
        categories: {
            sobreBotox: {
                message: 'Excelente! O que voc√™ gostaria de saber sobre o procedimento?',
                options: [
                    { id: 'oQueE', text: 'O que √© o Botox?' },
                    { id: 'paraQueServe', text: 'Para que serve?' },
                    { id: 'diferencaPreenchimento', text: 'Qual a diferen√ßa para preenchimento?' },
                    { id: 'beneficios', text: 'Quais os benef√≠cios?' }
                ]
            },
            precoEAgendamento: {
                message: '√ìtimo! Escolha uma op√ß√£o sobre valores e agendamento:',
                options: [
                    { id: 'valorCompleto', text: 'Qual o valor do botox?' },
                    { id: 'formasPagamento', text: 'Quais as formas de pagamento?' },
                    { id: 'agendar', text: 'Quero Agendar!' },
                    { id: 'ondeFica', text: 'Onde fica a cl√≠nica?' },
                    { id: 'horarioFuncionamento', text: 'Qual o hor√°rio de funcionamento?' }
                ]
            },
            aplicacaoEfeitos: {
                message: 'Entendido. Escolha uma pergunta sobre a aplica√ß√£o:',
                options: [
                    { id: 'doi', text: 'A aplica√ß√£o d√≥i?' },
                    { id: 'duracaoEfeito', text: 'Qual a dura√ß√£o do efeito?' },
                    { id: 'quandoVejoResultado', text: 'Quando vejo o resultado?' },
                    { id: 'areasAplicacao', text: 'Quais √°reas o Botox trata?' }
                ]
            },
            cuidadosSeguranca: {
                message: 'Perfeito. Escolha uma pergunta sobre seguran√ßa:',
                options: [
                    { id: 'riscos', text: 'Existem riscos ou efeitos colaterais?' },
                    { id: 'contraindicacoes', text: 'Quem n√£o pode fazer?' },
                    { id: 'cuidadosPos', text: 'Quais os cuidados ap√≥s o procedimento?' },
                    { id: 'seguranca', text: 'O procedimento √© seguro?' }
                ]
            },
        },
        answers: {
            oQueE: 'O Botox, ou toxina botul√≠nica, √© um tratamento est√©tico n√£o cir√∫rgico que suaviza linhas de express√£o e rugas, proporcionando uma apar√™ncia mais jovem e descansada. √â um procedimento seguro e muito popular!',
            paraQueServe: 'O Botox √© ideal para suavizar rugas na testa, entre as sobrancelhas ("glabela") e ao redor dos olhos ("p√©s de galinha"). Tamb√©m pode ser usado para levantar as sobrancelhas e para tratamentos como o bruxismo.',
            diferencaPreenchimento: 'O botox age relaxando os m√∫sculos para suavizar as rugas de express√£o, enquanto o preenchimento rep√µe o volume perdido em √°reas como l√°bios e sulcos, corrigindo rugas est√°ticas. Em muitos casos, os dois tratamentos s√£o complementares.',
            beneficios: 'Os benef√≠cios s√£o muitos! Reduz rugas de express√£o, previne o envelhecimento, melhora a autoestima e, em alguns casos, trata bruxismo e suor excessivo.',
            valorCompleto: 'O valor do procedimento de botox √© de 1200 reais. E para garantir que sua pele fique ainda mais incr√≠vel, este valor j√° inclui uma sess√£o de limpeza de pele e um peeling revitalizante.',
            formasPagamento: 'Aceitamos as principais bandeiras de cart√£o de cr√©dito. Voc√™ pode parcelar o valor do procedimento em at√© 10x sem juros no cart√£o de cr√©dito. Tamb√©m trabalhamos com PIX e dinheiro.',
            ondeFica: 'Nossa cl√≠nica est√° localizada na Rua Exemplo, 123, Bairro Centro, na cidade de Exemplo. Para mais detalhes e a melhor rota, voc√™ pode acessar o link do Google Maps que enviamos ao agendar.',
            horarioFuncionamento: 'N√≥s atendemos de segunda a sexta, das 9h √†s 18h, e aos s√°bados, das 9h √†s 13h.',
            doi: 'O procedimento √© bastante confort√°vel. Utilizaremos uma agulha muito fina e, se necess√°rio, podemos aplicar um anest√©sico t√≥pico para garantir que voc√™ n√£o sinta nenhum desconforto.',
            duracaoEfeito: 'O efeito do botox dura, em m√©dia, de 4 a 6 meses. O tempo pode variar de pessoa para pessoa, dependendo do metabolismo.',
            quandoVejoResultado: 'Os resultados come√ßam a aparecer entre 2 a 5 dias ap√≥s a aplica√ß√£o e o efeito completo pode ser visto em at√© 14 dias.',
            areasAplicacao: 'O botox pode ser aplicado em diversas √°reas, mas o mais comum √© tratar as tr√™s principais regi√µes de rugas de express√£o: Testa, Glabela e P√©s de Galinha.',
            riscos: 'Efeitos colaterais s√£o raros e geralmente leves, como pequenos hematomas na √°rea da aplica√ß√£o. Nossa equipe √© altamente treinada para garantir a seguran√ßa do procedimento.',
            contraindicacoes: 'O tratamento n√£o √© recomendado para gestantes, lactantes, pessoas com alergia √† toxina botul√≠nica ou com infec√ß√µes na √°rea de aplica√ß√£o.',
            cuidadosPos: 'Recomendamos n√£o deitar nas primeiras 4 horas e evitar exerc√≠cios f√≠sicos intensos nas 24 horas seguintes. Iremos te orientar sobre tudo no dia do seu procedimento.',
            seguranca: 'Absolutamente! Quando aplicado por um profissional qualificado, o botox √© um dos procedimentos est√©ticos mais seguros e eficazes que existem.'
        }
    };

    // Dados fict√≠cios de agenda (chave: 'YYYY-MM-DD', valor: array de hor√°rios)
    const agendaDisponivel = {
        '2025-08-25': ['09:00', '10:30', '14:00', '16:00'],
        '2025-08-26': ['09:30', '11:00', '15:00'],
        '2025-08-27': ['10:00', '13:00', '15:30'],
        '2025-08-28': ['09:00', '11:00'],
        '2025-08-29': ['14:00', '16:30'],
        '2025-08-30': [], // S√°bado, sem hor√°rios
        '2025-08-31': [], // Domingo, sem hor√°rios
        '2025-09-01': ['09:00', '10:00'],
        '2025-09-02': ['11:00', '14:00'],
        '2025-09-03': ['10:30', '15:00'],
    };

    // Fun√ß√£o para adicionar uma mensagem √† caixa de chat
    function addMessage(text, sender) {
        const messageDiv = document.createElement('div');
        messageDiv.classList.add('message', sender);
        messageDiv.innerHTML = text; // Usamos innerHTML para permitir negrito
        chatBox.appendChild(messageDiv);
        chatBox.scrollTop = chatBox.scrollHeight;
    }

    // Fun√ß√£o para renderizar os bot√µes do menu
    function renderButtons(buttons) {
        menuContainer.innerHTML = ''; // Limpa os bot√µes anteriores
        buttons.forEach(button => {
            const btn = document.createElement('button');
            btn.classList.add('menu-button');
            btn.textContent = button.text;
            btn.dataset.id = button.id;
            menuContainer.appendChild(btn);
            // Adiciona o event listener para cada bot√£o
            btn.addEventListener('click', () => handleButtonClick(button.id, button.text));
        });
    }

    // Fun√ß√£o para lidar com o clique dos bot√µes
    function handleButtonClick(buttonId, buttonText) {
        addMessage(buttonText, 'user');

        setTimeout(() => {
            // L√≥gica para as categorias do menu principal
            const category = botData.categories[buttonId];
            if (category) {
                addMessage(category.message, 'bot');
                renderButtons(category.options);
                return;
            }

            // L√≥gica para as respostas finais
            const answer = botData.answers[buttonId];
            if (answer) {
                addMessage(answer, 'bot');
                renderButtons([{id: 'voltar', text: 'Voltar'}, {id: 'agendarDireto', text: 'Quero Agendar'}]);
                return;
            }

            // L√≥gica para o fluxo de agendamento direto
            if (buttonId === 'agendar' || buttonId === 'agendarDireto') {
                estadoAgendamento = 1;
                addMessage('Perfeito! Por favor, selecione uma data dispon√≠vel para o seu agendamento.', 'bot');
                renderCalendar();
                return;
            }
            
            // L√≥gica para voltar ao menu anterior (ou principal)
            if (buttonId === 'voltar') {
                const lastUserMessage = chatBox.querySelector('.message.user:last-child').textContent;
                const parentCategory = Object.keys(botData.categories).find(key => botData.categories[key].options.some(opt => opt.text === lastUserMessage));
                
                if (parentCategory) {
                    addMessage(botData.categories[parentCategory].message, 'bot');
                    renderButtons(botData.categories[parentCategory].options);
                } else {
                    addMessage('Ol√°! Sou sua assistente virtual na BS Est√©tica. Escolha uma op√ß√£o para come√ßar. üòä', 'bot');
                    renderButtons(botData.mainMenu);
                }
                return;
            }
            
            // L√≥gica para voltar ao in√≠cio
            if (buttonId === 'voltarInicio') {
                chatBox.innerHTML = '<div class="message bot">Ol√°! Sou sua assistente virtual na BS Est√©tica. Escolha uma op√ß√£o para come√ßar. üòä</div>';
                renderButtons(botData.mainMenu);
            }

        }, 500);
    }
    
    // Fun√ß√µes para o calend√°rio
    function renderCalendar() {
        menuContainer.innerHTML = ''; // Limpa bot√µes existentes
        const calendarDiv = document.createElement('div');
        calendarDiv.classList.add('calendar');
        
        const monthYearStr = dataAtual.toLocaleString('pt-br', { month: 'long', year: 'numeric' });
        const header = document.createElement('div');
        header.classList.add('calendar-header');
        header.innerHTML = `
            <button id="prevMonth">&#9664;</button>
            <span>${monthYearStr}</span>
            <button id="nextMonth">&#9654;</button>
        `;
        calendarDiv.appendChild(header);

        const daysOfWeek = ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'S√°b'];
        daysOfWeek.forEach(day => {
            const dayName = document.createElement('div');
            dayName.classList.add('day-name');
            dayName.textContent = day;
            calendarDiv.appendChild(dayName);
        });

        const firstDay = new Date(dataAtual.getFullYear(), dataAtual.getMonth(), 1).getDay();
        const lastDay = new Date(dataAtual.getFullYear(), dataAtual.getMonth() + 1, 0).getDate();

        for (let i = 0; i < firstDay; i++) {
            calendarDiv.appendChild(document.createElement('div'));
        }

        for (let i = 1; i <= lastDay; i++) {
            const date = new Date(dataAtual.getFullYear(), dataAtual.getMonth(), i);
            const formattedDate = date.toISOString().slice(0, 10);
            
            const dayCell = document.createElement('div');
            dayCell.classList.add('day-cell');
            dayCell.textContent = i;
            
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            if (date >= today && agendaDisponivel[formattedDate]) {
                dayCell.classList.add('available');
                dayCell.addEventListener('click', () => handleDateClick(date));
            } else {
                dayCell.classList.add('unavailable');
            }
            
            calendarDiv.appendChild(dayCell);
        }

        menuContainer.appendChild(calendarDiv);

        document.getElementById('prevMonth').addEventListener('click', () => {
            dataAtual.setMonth(dataAtual.getMonth() - 1);
            renderCalendar();
        });

        document.getElementById('nextMonth').addEventListener('click', () => {
            dataAtual.setMonth(dataAtual.getMonth() + 1);
            renderCalendar();
        });
    }

    // Fun√ß√£o para lidar com o clique em uma data
    function handleDateClick(date) {
        dataSelecionada = date;
        estadoAgendamento = 2; // Passa para o estado de selecionar hora
        
        const formattedDate = dataSelecionada.toLocaleDateString('pt-br', { day: '2-digit', month: 'long' });
        addMessage(`Data selecionada: ${formattedDate}. Agora, por favor, escolha um hor√°rio dispon√≠vel.`, 'bot');

        renderTimeSlots(date);
    }

    // Fun√ß√£o para renderizar os hor√°rios dispon√≠veis
    function renderTimeSlots(date) {
        menuContainer.innerHTML = '';
        const formattedDate = date.toISOString().slice(0, 10);
        const timeSlots = agendaDisponivel[formattedDate];
        
        if (timeSlots && timeSlots.length > 0) {
            const timeSlotsDiv = document.createElement('div');
            timeSlotsDiv.classList.add('time-slots');
            timeSlots.forEach(time => {
                const timeBtn = document.createElement('button');
                timeBtn.classList.add('menu-button', 'time-button');
                timeBtn.textContent = time;
                timeBtn.addEventListener('click', () => handleTimeClick(time));
                timeSlotsDiv.appendChild(timeBtn);
            });
            menuContainer.appendChild(timeSlotsDiv);
        } else {
            addMessage('N√£o h√° hor√°rios dispon√≠veis para esta data. Por favor, escolha outra data.', 'bot');
            renderCalendar();
        }
    }
    
    // Fun√ß√£o para lidar com o clique em um hor√°rio
    function handleTimeClick(time) {
        horarioSelecionado = time;
        estadoAgendamento = 3; // Passa para o estado de pedir nome

        addMessage(`Hor√°rio selecionado: ${horarioSelecionado}. Agora, por favor, me diga seu nome completo.`, 'bot');
        createSchedulingInput('Digite seu nome...');
    }

    // Fun√ß√£o para criar o input de texto para agendamento
    function createSchedulingInput(placeholderText) {
        menuContainer.innerHTML = '';
        const inputDiv = document.createElement('div');
        inputDiv.classList.add('scheduling-input');
        inputDiv.innerHTML = `
            <input type="text" id="schedulingInput" placeholder="${placeholderText}">
            <button id="schedulingSendBtn">Enviar</button>
        `;
        menuContainer.appendChild(inputDiv);

        const input = document.getElementById('schedulingInput');
        const sendBtn = document.getElementById('schedulingSendBtn');

        sendBtn.addEventListener('click', () => {
            const inputValue = input.value.trim();
            addMessage(inputValue, 'user');

            if (estadoAgendamento === 3) {
                if (inputValue.length > 2) {
                    nomeCliente = inputValue;
                    estadoAgendamento = 4;
                    addMessage(`Obrigado, ${nomeCliente}! Agora, por favor, informe seu n√∫mero de telefone (com DDD) para que nossa equipe finalize o agendamento.`, 'bot');
                    createSchedulingInput('Digite seu telefone...');
                } else {
                    addMessage('Por favor, digite um nome v√°lido.', 'bot');
                }
            } else if (estadoAgendamento === 4) {
                const telLimpo = inputValue.replace(/[\s()-]/g, '');
                if (telLimpo.length >= 8 && telLimpo.length <= 11 && !isNaN(telLimpo)) {
                    telefoneCliente = inputValue;
                    estadoAgendamento = 0; // Finaliza o fluxo
                    
                    const dataFormatada = dataSelecionada.toLocaleDateString('pt-br');
                    const textoWhatsApp = `Ol√°, gostaria de agendar um botox!%0A%0A*Nome:* ${nomeCliente}%0A*Telefone:* ${telefoneCliente}%0A*Data:* ${dataFormatada}%0A*Hor√°rio:* ${horarioSelecionado}%0A%0A--%0AEnviado pelo assistente virtual da cl√≠nica.`;
                    
                    const numeroWhatsApp = '5527999456682';
                    const linkWhatsApp = `https://wa.me/${numeroWhatsApp}?text=${textoWhatsApp}`;

                    menuContainer.innerHTML = '';
                    const finalMessageHTML = `
                        <div style="text-align: center; font-size: 1.1rem;">
                            <p>Perfeito! Recebi seus dados. Para confirmar seu agendamento, por favor, clique no bot√£o abaixo para nos enviar as informa√ß√µes via WhatsApp.</p>
                            <a href="${linkWhatsApp}" target="_blank" class="menu-button" style="text-decoration: none; margin-top: 15px;">
                                Enviar no WhatsApp
                            </a>
                        </div>
                    `;
                    addMessage(finalMessageHTML, 'bot');
                    
                } else {
                    addMessage('Por favor, digite um n√∫mero de telefone v√°lido (com DDD).', 'bot');
                }
            }
        });

        input.addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                sendBtn.click();
            }
        });
        input.focus();
    }

    // Inicializa o chat com o menu principal
    renderButtons(botData.mainMenu);
</script>

</body>
</html>